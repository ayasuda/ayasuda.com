---
title: 'kakitsuke 開発日誌'
keywords:
  - diary
---

ふと思い立ち、僕の考えた最高のノートツールをちゃんと開発してみようと思う。
設計的にはマイクロサービスアーキテクチャを用い、後々様々なサービスと連携できるように作ってみたい。

機能としてはログインでき、ノートを追加でき、可視性を設定でき、何かの課金ができる。そんなサービスを作ってみたい。

# 最初の一歩

せっかくなので、最初から運用を見据えたプロジェクトにしたい。
最初の一歩は、開発運用からだろう。

そんなわけで git リポジトリを用意し、[Script To Rule Them All](https://github.com/github/scripts-to-rule-them-all) に則ったスクリプトを用意する。

* script/bootstrap: プロジェクトに必要な依存関係を満たすために色々する。具体的には必要なツールやサブジュールなどのインストール/アップデートをする。
* script/setup: プロジェクトの初期化をする。最初に clone した後またはしばらく開発した後初期化したくなった時に使う。
* script/update: プロジェクトを更新する。データベースの定義変更や、設定ファイルの変更などを行う。
* script/serevr: アプリケーションを起動する。
* script/test: アプリケーションのテストスイート（含む静的解析）を実行する。
* script/cibuild: アプリケーションのテストスイートを実行する（ための CI 用環境セットアップを含む）
* script/console: アプリケーションのコンソールを開く

この構成を整えることにより、後から入って来た人や自分自身が新しい環境で、
clone 直後に1回だけ `script/setup` を実行し、毎日 pull するごとに `script/update` し、
開発中は `script/server` で開発し、push 前に `script/test` する流れが定型化できるはずだ。

# script/bootstrap

`script/bootstrap` は必要なツールなどをインストールするためのスクリプトです。

ツールどこでどう使うか？
結局 docker なので、docker がインストールされてりゃいいのでは？

